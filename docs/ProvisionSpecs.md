<!-- SPDX-FileCopyrightText: 2024 WithLithum <WithLithum@outlook.com> -->
<!-- SPDX-License-Identifier: GPL-3.0-or-later -->

# Provision Specification

A provision represents an entry in the provisions database that points to a
particular package providing a specified feature (usually a dependency).

## Database

Inside the package scope root, there MUST be a `provisions` directory. Each
entry of the directory MUST be named `<name>.json` where `<name>` is the name
of the provision, and MUST contain the following data in UTF-8:

```json
{
  "name": "<package id>",
  "version": "<package version>"
}
```

The `name` and `version` property MUST point to a package exists in the local
package scope.

### Generation

The database is generated by iterating over all packages in the local scope and
inspecting the `provides` field of their manifest. 

Each package provides at least one provision, that is one with the same name
and version as the package itself.

The behaviour when two packages provides the same provision is undefined; 
however, per the package scope specification, two packages providing the same
provision MUST be regarded as incompatible.

## Maintenance

If the database in the package scope root violates this specification, then the
database files MUST be marked invalid and regenerated from the local package
scope.
